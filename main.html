<!DOCTYPE html>
<html>
  <head>
    <title>A-Frame Classic Games</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script>
      // Componente para controlar la animaciÃ³n con la mirada
      AFRAME.registerComponent('pause-on-look-away', {
        init: function () {
          let el = this.el;
          // Al iniciar, pausamos las animaciones
          el.pause(); 
          
          this.el.addEventListener('mouseenter', () => {
            el.play(); // Se activa al mirar
          });
          
          this.el.addEventListener('mouseleave', () => {
            el.pause(); // Se detiene al quitar la mirada
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <a-asset-item id="pacman-model" src="Pacman.glb"></a-asset-item>
        <a-asset-item id="knight-model" src="knight.glb"></a-asset-item>
        <a-asset-item id="cat-model" src="oiiaioooooiai_cat.glb"></a-asset-item>
        <audio id="cat-sound" src="oiia-oiia-sound.mp3" preload="auto"></audio>
      </a-assets>

      <a-entity camera look-controls position="0 1.6 0">
        <a-cursor color="#FF0000" fuse="false"></a-cursor>
      </a-entity>

      <a-entity 
        gltf-model="#pacman-model" 
        position="-2 1.5 -3" 
        scale="0.5 0.5 0.5"
        animation="property: rotation; to: 0 360 0; loop: true; dur: 3000; easing: linear"
        pause-on-look-away>
      </a-entity>

      <a-entity 
        gltf-model="#knight-model" 
        position="0 1 -3" 
        scale="1 1 1"
        animation="property: position; to: 0 1.5 -3; dir: alternate; loop: true; dur: 1000"
        pause-on-look-away>
      </a-entity>

      <a-entity 
        gltf-model="#cat-model" 
        position="2 1.2 -3" 
        scale="0.8 0.8 0.8"
        animation="property: scale; to: 1 1 1; dir: alternate; loop: true; dur: 500"
        sound="src: #cat-sound; on: mouseenter; loop: true"
        pause-on-look-away>
      </a-entity>

      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
  </body>
</html>